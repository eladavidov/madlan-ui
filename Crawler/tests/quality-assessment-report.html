<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Madlan Crawler - Quality Assessment Report</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f5f5;
      padding: 20px;
      direction: rtl;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }
    .header h1 { font-size: 2.5em; margin-bottom: 10px; }
    .header p { font-size: 1.1em; opacity: 0.9; }
    .section {
      padding: 30px;
      border-bottom: 1px solid #e0e0e0;
    }
    .section:last-child { border-bottom: none; }
    .section h2 {
      font-size: 1.8em;
      margin-bottom: 20px;
      color: #333;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .stat-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      border-right: 4px solid #667eea;
    }
    .stat-card h3 {
      font-size: 2em;
      color: #667eea;
      margin-bottom: 5px;
    }
    .stat-card p {
      color: #666;
      font-size: 0.95em;
    }
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 0.95em;
    }
    .comparison-table th {
      background: #667eea;
      color: white;
      padding: 12px;
      text-align: right;
      font-weight: 600;
    }
    .comparison-table td {
      padding: 12px;
      border-bottom: 1px solid #e0e0e0;
      text-align: right;
    }
    .comparison-table tr:nth-child(even) {
      background: #f8f9fa;
    }
    .status-ok { color: #28a745; font-weight: bold; }
    .status-warning { color: #ffc107; font-weight: bold; }
    .status-error { color: #dc3545; font-weight: bold; }
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.85em;
      font-weight: 600;
    }
    .badge-ok { background: #d4edda; color: #155724; }
    .badge-warning { background: #fff3cd; color: #856404; }
    .badge-error { background: #f8d7da; color: #721c24; }
    .code-block {
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 15px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
      overflow-x: auto;
      margin: 15px 0;
      direction: ltr;
      text-align: left;
    }
    .property-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .property-card {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      border-right: 3px solid #667eea;
    }
    .property-card h4 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 1.1em;
    }
    .property-card .field {
      margin: 8px 0;
      font-size: 0.9em;
    }
    .property-card .field strong {
      color: #666;
      min-width: 120px;
      display: inline-block;
    }
    .schema-box {
      background: #2d2d2d;
      color: #f8f8f2;
      border-radius: 6px;
      padding: 20px;
      font-family: 'Courier New', monospace;
      font-size: 0.85em;
      overflow-x: auto;
      margin: 15px 0;
      direction: ltr;
      text-align: left;
    }
    .summary-banner {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      text-align: center;
    }
    .summary-banner h3 {
      font-size: 1.5em;
      margin-bottom: 15px;
    }
    .summary-stats {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
    }
    .summary-stat {
      text-align: center;
    }
    .summary-stat-value {
      font-size: 2.5em;
      font-weight: bold;
      margin-bottom: 5px;
    }
    .summary-stat-label {
      font-size: 0.9em;
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ” Madlan Crawler - Quality Assessment Report</h1>
      <p>Generated: 10.10.2025, 13:35:38</p>
    </div>

    <div class="section">
      <h2>ğŸ“Š Database Statistics</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <h3>38</h3>
          <p>Total Properties in Database</p>
        </div>
        <div class="stat-card">
          <h3>0</h3>
          <p>Images for Target Property</p>
        </div>
        <div class="stat-card">
          <h3>4</h3>
          <p>Database Tables</p>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ¯ Comparison Summary</h2>
      <div class="summary-banner">
        <h3>Data Quality Assessment</h3>
        <div class="summary-stats">
          <div class="summary-stat">
            <div class="summary-stat-value">8</div>
            <div class="summary-stat-label">âœ… Matching Fields</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-value">12</div>
            <div class="summary-stat-label">âš ï¸ Warnings</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-value">0</div>
            <div class="summary-stat-label">âŒ Errors</div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ” Detailed Field Comparison (Property ID: LNkcTRJRods)</h2>
      <table class="comparison-table">
        <thead>
          <tr>
            <th>×©×“×”</th>
            <th>×¢×¨×š ×‘××¡×“ ×”× ×ª×•× ×™×</th>
            <th>×¢×¨×š ×‘-HTML</th>
            <th>×¡×˜×˜×•×¡</th>
            <th>×”×¢×¨×•×ª</th>
          </tr>
        </thead>
        <tbody>
          
            <tr>
              <td><strong>price</strong></td>
              <td>1,750,000</td>
              <td>1,750,000</td>
              <td>
                <span class="badge badge-ok">
                  âœ… ×ª×•××
                </span>
              </td>
              <td>-</td>
            </tr>
          
            <tr>
              <td><strong>rooms</strong></td>
              <td>4</td>
              <td>4</td>
              <td>
                <span class="badge badge-ok">
                  âœ… ×ª×•××
                </span>
              </td>
              <td>-</td>
            </tr>
          
            <tr>
              <td><strong>size</strong></td>
              <td>100</td>
              <td>100</td>
              <td>
                <span class="badge badge-ok">
                  âœ… ×ª×•××
                </span>
              </td>
              <td>-</td>
            </tr>
          
            <tr>
              <td><strong>floor</strong></td>
              <td>2</td>
              <td>2</td>
              <td>
                <span class="badge badge-ok">
                  âœ… ×ª×•××
                </span>
              </td>
              <td>-</td>
            </tr>
          
            <tr>
              <td><strong>address</strong></td>
              <td>×©×¢×¨ ×”×’×™× 11</td>
              <td>×©×¢×¨ ×”×’×™× 11</td>
              <td>
                <span class="badge badge-ok">
                  âœ… ×ª×•××
                </span>
              </td>
              <td>-</td>
            </tr>
          
            <tr>
              <td><strong>neighborhood</strong></td>
              <td>××—×•×–×”</td>
              <td>××—×•×–×”</td>
              <td>
                <span class="badge badge-ok">
                  âœ… ×ª×•××
                </span>
              </td>
              <td>-</td>
            </tr>
          
            <tr>
              <td><strong>city</strong></td>
              <td>×—×™×¤×”</td>
              <td>×—×™×¤×”</td>
              <td>
                <span class="badge badge-ok">
                  âœ… ×ª×•××
                </span>
              </td>
              <td>-</td>
            </tr>
          
            <tr>
              <td><strong>property_type</strong></td>
              <td>××“ ××“×œ×Ÿ: ×‘×§×¨×•×‘ ×œ× ×›×¡ ×–×”</td>
              <td>××“ ××“×œ×Ÿ: ×‘×§×¨×•×‘ ×œ× ×›×¡ ×–×”</td>
              <td>
                <span class="badge badge-ok">
                  âœ… ×ª×•××
                </span>
              </td>
              <td>-</td>
            </tr>
          
            <tr>
              <td><strong>has_parking</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>has_elevator</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>has_balcony</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>has_air_conditioning</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>has_security_door</strong></td>
              <td>0</td>
              <td>âŒ ×œ×</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>has_bars</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>has_storage</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>has_shelter</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>is_accessible</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>is_renovated</strong></td>
              <td>1</td>
              <td>âœ… ×›×Ÿ</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>is_furnished</strong></td>
              <td>0</td>
              <td>âŒ ×œ×</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Values differ</td>
            </tr>
          
            <tr>
              <td><strong>image_count</strong></td>
              <td>0</td>
              <td>27</td>
              <td>
                <span class="badge badge-warning">
                  âš ï¸ ××–×”×¨×”
                </span>
              </td>
              <td>Image count differs</td>
            </tr>
          
        </tbody>
      </table>
    </div>

    <div class="section">
      <h2>ğŸ  Property Details</h2>
      <div class="property-grid">
        <div class="property-card">
          <h4>ğŸ“Š Database Data</h4>
          
            <div class="field"><strong>××—×™×¨:</strong> â‚ª1,750,000</div>
            <div class="field"><strong>×—×“×¨×™×:</strong> 4</div>
            <div class="field"><strong>×"×¨:</strong> 100</div>
            <div class="field"><strong>×§×•××”:</strong> 2</div>
            <div class="field"><strong>×›×ª×•×‘×ª:</strong> ×©×¢×¨ ×”×’×™× 11</div>
            <div class="field"><strong>×©×›×•× ×”:</strong> ××—×•×–×”</div>
            <div class="field"><strong>×¢×™×¨:</strong> ×—×™×¤×”</div>
            <div class="field"><strong>×¡×•×’ × ×›×¡:</strong> ××“ ××“×œ×Ÿ: ×‘×§×¨×•×‘ ×œ× ×›×¡ ×–×”</div>
            <div class="field"><strong>×—× ×™×”:</strong> âœ… ×›×Ÿ</div>
            <div class="field"><strong>××¢×œ×™×ª:</strong> âœ… ×›×Ÿ</div>
            <div class="field"><strong>××¨×¤×¡×ª:</strong> âœ… ×›×Ÿ</div>
          
        </div>

        <div class="property-card">
          <h4>ğŸ“„ HTML Extracted Data</h4>
          
            <div class="field"><strong>××—×™×¨:</strong> â‚ª1,750,000</div>
            <div class="field"><strong>×—×“×¨×™×:</strong> 4</div>
            <div class="field"><strong>×"×¨:</strong> 100</div>
            <div class="field"><strong>×§×•××”:</strong> 2</div>
            <div class="field"><strong>×›×ª×•×‘×ª:</strong> ×©×¢×¨ ×”×’×™× 11</div>
            <div class="field"><strong>×©×›×•× ×”:</strong> ××—×•×–×”</div>
            <div class="field"><strong>×¢×™×¨:</strong> ×—×™×¤×”</div>
            <div class="field"><strong>×¡×•×’ × ×›×¡:</strong> ××“ ××“×œ×Ÿ: ×‘×§×¨×•×‘ ×œ× ×›×¡ ×–×”</div>
            <div class="field"><strong>×—× ×™×”:</strong> âœ… ×›×Ÿ</div>
            <div class="field"><strong>××¢×œ×™×ª:</strong> âœ… ×›×Ÿ</div>
            <div class="field"><strong>××¨×¤×¡×ª:</strong> âœ… ×›×Ÿ</div>
          
        </div>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ—„ï¸ Database Schema</h2>
      
        <h3 style="margin-top: 20px; color: #667eea;">crawl_errors</h3>
        <div class="schema-box">CREATE TABLE crawl_errors (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  session_id TEXT,
  error_type TEXT NOT NULL,
  error_message TEXT NOT NULL,
  error_stack TEXT,
  url TEXT,
  property_id TEXT,
  occurred_at TEXT NOT NULL DEFAULT (datetime(&#039;now&#039;)),
  FOREIGN KEY (session_id) REFERENCES crawl_sessions(session_id),
  FOREIGN KEY (property_id) REFERENCES properties(id)
)</div>
      
        <h3 style="margin-top: 20px; color: #667eea;">crawl_sessions</h3>
        <div class="schema-box">CREATE TABLE crawl_sessions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  session_id TEXT UNIQUE NOT NULL,
  start_time TEXT NOT NULL DEFAULT (datetime(&#039;now&#039;)),
  end_time TEXT,
  target_city TEXT,
  max_properties INTEGER,
  properties_found INTEGER DEFAULT 0,
  properties_new INTEGER DEFAULT 0,
  properties_updated INTEGER DEFAULT 0,
  properties_failed INTEGER DEFAULT 0,
  images_downloaded INTEGER DEFAULT 0,
  images_failed INTEGER DEFAULT 0,
  status TEXT NOT NULL DEFAULT &#039;running&#039;,
  error_message TEXT,
  user_agent TEXT,
  ip_address TEXT,
  notes TEXT
)</div>
      
        <h3 style="margin-top: 20px; color: #667eea;">properties</h3>
        <div class="schema-box">CREATE TABLE properties (
  id TEXT PRIMARY KEY NOT NULL,
  url TEXT UNIQUE NOT NULL,
  source_url TEXT,
  price INTEGER,
  rooms REAL,
  size REAL,
  floor INTEGER,
  total_floors INTEGER,
  address TEXT,
  neighborhood TEXT,
  city TEXT NOT NULL,
  property_type TEXT,
  description TEXT,
  has_parking BOOLEAN DEFAULT 0,
  parking_spaces INTEGER,
  has_elevator BOOLEAN DEFAULT 0,
  has_balcony BOOLEAN DEFAULT 0,
  balcony_size REAL,
  has_air_conditioning BOOLEAN DEFAULT 0,
  has_security_door BOOLEAN DEFAULT 0,
  has_bars BOOLEAN DEFAULT 0,
  has_storage BOOLEAN DEFAULT 0,
  has_shelter BOOLEAN DEFAULT 0,
  is_accessible BOOLEAN DEFAULT 0,
  is_renovated BOOLEAN DEFAULT 0,
  is_furnished BOOLEAN DEFAULT 0,
  entry_date TEXT,
  listing_date TEXT,
  last_updated TEXT,
  contact_name TEXT,
  contact_phone TEXT,
  contact_agency TEXT,
  first_crawled_at TEXT NOT NULL DEFAULT (datetime(&#039;now&#039;)),
  last_crawled_at TEXT NOT NULL DEFAULT (datetime(&#039;now&#039;)),
  crawl_count INTEGER NOT NULL DEFAULT 1,
  data_complete BOOLEAN DEFAULT 1,
  has_errors BOOLEAN DEFAULT 0,
  error_notes TEXT
)</div>
      
        <h3 style="margin-top: 20px; color: #667eea;">property_images</h3>
        <div class="schema-box">CREATE TABLE property_images (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  property_id TEXT NOT NULL,
  image_url TEXT NOT NULL,
  image_order INTEGER NOT NULL DEFAULT 0,
  is_main_image BOOLEAN DEFAULT 0,
  image_type TEXT,
  width INTEGER,
  height INTEGER,
  file_size INTEGER,
  is_downloaded BOOLEAN DEFAULT 0,
  local_path TEXT,
  download_date TEXT,
  download_error TEXT,
  created_at TEXT NOT NULL DEFAULT (datetime(&#039;now&#039;)),
  FOREIGN KEY (property_id) REFERENCES properties(id) ON DELETE CASCADE
)</div>
      
    </div>

    <div class="section">
      <h2>ğŸ“¸ Image Analysis</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <h3>0</h3>
          <p>Images in Database</p>
        </div>
        <div class="stat-card">
          <h3>27</h3>
          <p>Images in HTML</p>
        </div>
        <div class="stat-card">
          <h3>0</h3>
          <p>Downloaded Images</p>
        </div>
      </div>

      <h3 style="margin-top: 20px;">Sample Image URLs (Database):</h3>
      <div class="code-block">
        No images found
      </div>

      <h3 style="margin-top: 20px;">Sample Image URLs (HTML):</h3>
      <div class="code-block">
        1. file:///C:/Src/Madlan/Crawler/tests/madlan-website-saved-pages/FirstPropertyPage/images/10.webp
2. file:///C:/Src/Madlan/Crawler/tests/madlan-website-saved-pages/FirstPropertyPage/images/11.webp
3. file:///C:/Src/Madlan/Crawler/tests/madlan-website-saved-pages/FirstPropertyPage/images/12.webp
4. file:///C:/Src/Madlan/Crawler/tests/madlan-website-saved-pages/FirstPropertyPage/images/13.webp
5. file:///C:/Src/Madlan/Crawler/tests/madlan-website-saved-pages/FirstPropertyPage/images/14.webp
      </div>
    </div>

    <div class="section">
      <h2>ğŸ“ Sample Properties from Database</h2>
      <table class="comparison-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>××—×™×¨</th>
            <th>×—×“×¨×™×</th>
            <th>×"×¨</th>
            <th>×›×ª×•×‘×ª</th>
            <th>×¢×™×¨</th>
          </tr>
        </thead>
        <tbody>
          
            <tr>
              <td>DaxDvYFZWWi</td>
              <td>â‚ª1,690,000</td>
              <td>5.5</td>
              <td>140</td>
              <td>×”× ×˜×§×”</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>cto9IWbOAlj</td>
              <td>â‚ª1,600,000</td>
              <td>4</td>
              <td>96</td>
              <td>×©××©×•×Ÿ 46</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>8K7rAKQHLne</td>
              <td>â‚ª2,850,000</td>
              <td>5</td>
              <td>155</td>
              <td>×¡×—×œ×‘ 20</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>IZ3YXzx972z</td>
              <td>â‚ª1,600,000</td>
              <td>4</td>
              <td>100</td>
              <td>×“×¨×š ××œ× ×‘×™ 109</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>leYgvuoPKEz</td>
              <td>â‚ª3,100,000</td>
              <td>4</td>
              <td>115</td>
              <td>×××¤×• 9</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>nMTtS88o71o</td>
              <td>â‚ª1,250,000</td>
              <td>3</td>
              <td>86</td>
              <td>×“×¨×š ×™×“ ×œ×‘× ×™×</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>75gVLFw9Dsj</td>
              <td>â‚ª2,750,000</td>
              <td>5</td>
              <td>118</td>
              <td>×“×•×“ ××¨×›×•×¡ 5</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>cwoW1Cp5Ld1</td>
              <td>â‚ª2,670,000</td>
              <td>5</td>
              <td>127</td>
              <td>××™×™×§ ×‘×¨× ×˜ 11</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>MxMWN3hpmZp</td>
              <td>â‚ª2,150,000</td>
              <td>5</td>
              <td>125</td>
              <td>×”× ×˜×§×” 50</td>
              <td>×—×™×¤×”</td>
            </tr>
          
            <tr>
              <td>NpDyKOMUlsQ</td>
              <td>â‚ª1,990,000</td>
              <td>3</td>
              <td>74</td>
              <td>×“×•×“ ××¨×›×•×¡ 5</td>
              <td>×—×™×¤×”</td>
            </tr>
          
        </tbody>
      </table>
      
        <p style="text-align: center; margin-top: 15px; color: #666;">
          ××¦×™×’ 10 ××ª×•×š 38 × ×›×¡×™×
        </p>
      
    </div>
  </div>
</body>
</html>